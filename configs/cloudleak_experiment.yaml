run:
  name: "cifar10_resnet18_soft_cloudleak"
  seeds: [0, 1, 2]
  device: "cuda:0"

  victim:
    victim_id: "cifar10_resnet18_v1"
    checkpoint_ref: "/path/to/ckpt.pt"
    input_size: [32, 32]
    channels: 3
    normalization:
      mean: [0.4914, 0.4822, 0.4465]
      std:  [0.2470, 0.2435, 0.2616]
    output_mode: "soft_prob"
    temperature: 1.0
    output_modes_supported: ["soft_prob"]

  dataset:
    name: "CIFAR10"
    data_mode: "seed"  # Uses random seed pool for adversarial synthesis
    seed_size: 1000

  substitute:
    arch: "resnet18"
    init_seed: 1234
    trackA:
      batch_size: 128
      steps_coeff_c: 0.2
    optimizer:
      name: "sgd"
      lr: 0.01
      momentum: 0.9
      weight_decay: 5e-4
    loss:
      soft: "kl"
      hard: "ce"

  attack:
    name: "cloudleak"
    output_mode: "soft_prob"

    # CloudLeak-specific config
    lbfgs_iters: 20
    lbfgs_factr: 10000000.0
    lbfgs_pgtol: 1e-05
    margin_m: 0.5  # Triplet loss margin
    lambda_adv: 0.001  # Smallest value per paper
    initial_pool_size: 1000  # Random seed pool for adversarial synthesis
    batch_size: 64  # From original repo
    max_epochs: 1000
    patience: 100

  budget:
    max_budget: 100000
    checkpoints: [1000, 10000, 100000]

  cache:
    enabled: true
    policy: "temporary"
    delete_on_finish: true
