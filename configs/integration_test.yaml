# Minimal integration test configuration

run:
  name: "integration_test"
  seeds: [0]
  device: "cpu"  # Force CPU for testing

victim:
  victim_id: "test_victim"
  checkpoint_ref: "/path/to/ckpt.pt"  # Placeholder - will create model
  arch: "lenet"  # Use simpler model for testing
  channels: 3
  num_classes: 10
  input_size: [32, 32]  # Simple 32x32 (not standard CIFAR-10)
  normalization:
    mean: [0.5, 0.5, 0.5]
    std: [0.5, 0.5, 0.5]
  output_mode: "soft_prob"
  temperature: 1.0
  output_modes_supported: ["soft_prob", "hard_top1"]

dataset:
  name: "CIFAR10"
  data_mode: "seed"
  seed_size: 100  # Small pool for testing

substitute:
  arch: "lenet"  # Simple architecture
  init_seed: 1234
  trackA:
    batch_size: 32  # Small batch for quick testing
    steps_coeff_c: 20  # S(B) = ceil(0.2 * B)
  optimizer:
    name: "sgd"
    lr: 0.01
    momentum: 0.9
    weight_decay: 0.0001
  loss:
    soft: "kl"
    hard: "ce"

attack:
  name: "random"
  output_mode: "soft_prob"

budget:
  max_budget: 500  # Very small for quick test
  checkpoints: [100, 500]

cache:
  enabled: true
  delete_on_finish: false  # Keep for inspection
