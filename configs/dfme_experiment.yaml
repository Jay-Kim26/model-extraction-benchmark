run:
  name: "cifar10_resnet18_soft_dfme"
  seeds: [0, 1, 2]
  device: "cuda:0"

victim:
  victim_id: "cifar10_resnet18_v1"
  checkpoint_ref: "/path/to/ckpt.pt"
  input_size: [32, 32]
  channels: 3
  normalization:
    mean: [0.4914, 0.4822, 0.4465]
    std:  [0.2470, 0.2435, 0.2616]
  output_mode: "soft_prob"
  temperature: 1.0
  output_modes_supported: ["soft_prob", "hard_top1"]

dataset:
  name: "CIFAR10"
  data_mode: "data_free"  # DFME requires data_free
  seed_size: 0  # Not used for data_free

substitute:
  arch: "resnet18-8x"  # Wider variant for DFME
  init_seed: 1234
  trackA:
    batch_size: 128
    steps_coeff_c: 0.2
  optimizer:
    name: "sgd"
    lr: 0.1
    momentum: 0.9
    weight_decay: 5e-4
  loss:
    soft: "l1"  # DFME uses L1 loss
    hard: "ce"

attack:
  name: "dfme"  # data-free generative attack
  output_mode: "soft_prob"

  # DFME-specific config
  batch_size: 256
  student_lr: 0.1
  student_weight_decay: 5e-4
  generator_lr: 5e-4
  n_g_steps: 1  # Generator steps
  n_s_steps: 5  # Student steps
  grad_approx_m: 1  # Random directions
  grad_approx_epsilon: 0.001  # Step size
  noise_dim: 100

budget:
  max_budget: 20000000  # 20M for CIFAR-10
  checkpoints: [1000, 10000, 100000, 1000000, 10000000, 20000000]

cache:
  enabled: true
  policy: "temporary"
  delete_on_finish: true
